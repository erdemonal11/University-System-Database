CREATE TABLE INSTRUCTOR(
  ssn CHAR(11) NOT NULL,
  iname VARCHAR(225) NOT NULL,
  rankk VARCHAR(225) NOT NULL,
  baseSalary DECIMAL(10,2) UNSIGNED NOT NULL,
  extraSalary DECIMAL(10,2) UNSIGNED,
  dName VARCHAR(225) REFERENCES DEPARTMENT(dName),
  PRIMARY KEY(ssn)
  );

CREATE TABLE DEPARTMENT(
  dName VARCHAR(225) NOT NULL,
  budget DECIMAL(50,2) UNSIGNED,
  headSSn CHAR(11) REFERENCES INSTRUCTOR(ssn),
  buildingName VARCHAR(225) NOT NULL REFERENCES BUILDCLASS(buildingName),
  PRIMARY KEY(dName)
  );

CREATE TABLE PROJECT(
  leadSSn CHAR(11) NOT NULL,
  prName VARCHAR(225) NOT NULL,
  startDate DATE NOT NULL,
  endDate DATE NOT NULL,
  subject VARCHAR(225) NOT NULL,
  contrDName VARCHAR(225) NOT NULL REFERENCES DEPARTMENT(dName),
  FOREIGN KEY(leadSSn) REFERENCES INSTRUCTOR(ssn) ON DELETE NO ACTION,
  PRIMARY KEY(prName,leadSSn)
  );

CREATE TABLE INSTRINPROJECTS(
  PrjleadSsn CHAR(11) NOT NULL,
  prName VARCHAR(225) NOT NULL,
  issn CHAR(11) NOT NULL,
  workingHours NUMERIC(3) UNSIGNED,
  FOREIGN KEY(prName) REFERENCES PROJECT(prName) ON DELETE RESTRICT,
  FOREIGN KEY(issn) REFERENCES INSTRUCTOR(ssn) ON DELETE RESTRICT,
  FOREIGN KEY(PrjleadSsn) REFERENCES PROJECT(leadSsn) ON DELETE NO ACTION,
  PRIMARY KEY(PrjleadSsn,prName,issn)
  );

CREATE TABLE STUDENT(
  sssn CHAR(11) NOT NULL,
  gradorUgrad VARCHAR(5) NOT NULL,
  advisorSsn CHAR(11) NOT NULL REFERENCES INSTRUCTOR(ssn),
  currCode VARCHAR(12) NOT NULL REFERENCES CIRRICULA(currCode),
  dName VARCHAR(225) NOT NULL REFERENCES DEPARTMENT(dName),
  studentId CHAR(10) NOT NULL,
  sName VARCHAR(225) NOT NULL,
  PRIMARY KEY(sssn)
  );

CREATE TABLE GRADSTUDENT(
  sssn CHAR(11) NOT NULL,
  advisorSsn CHAR(11) NOT NULL,
  FOREIGN KEY(sssn) REFERENCES STUDENT(sssn) ON DELETE NO ACTION,
  FOREIGN KEY(advisorSsn) REFERENCES INSTRUCTOR(ssn) ON DELETE NO ACTION,
  PRIMARY KEY(sssn, advisorSsn)
  );

CREATE TABLE GRADSINPROJECTS(
  PrjleadSsn CHAR(11) NOT NULL,
  prName VARCHAR(225) NOT NULL,
  gradsssn CHAR(11) NOT NULL,
  workingHours NUMERIC(3) UNSIGNED,
  FOREIGN KEY(PrjleadSsn) REFERENCES PROJECT(leadSsn) ON DELETE RESTRICT,
  FOREIGN KEY(prName) REFERENCES PROJECT(prName) ON DELETE CASCADE,
  FOREIGN KEY(gradsssn) REFERENCES GRADSTUDENT(sssn) ON DELETE RESTRICT,
  PRIMARY KEY(PrjleadSsn,prName,gradsssn)
  );

CREATE TABLE EMAILS(
  sssn CHAR(11) NOT NULL,
  email CHAR(22) NOT NULL,
  FOREIGN KEY(sssn) REFERENCES STUDENT(sssn) ON DELETE NO ACTION,
  PRIMARY KEY(sssn,email)
  );
 
CREATE TABLE PREVDEGREES(
  college VARCHAR(225) NOT NULL,
  degree VARCHAR(225) NOT NULL,
  year CHAR(4) NOT NULL,
  gradsssn CHAR(11) NOT NULL,
  FOREIGN KEY(gradsssn) REFERENCES GRADSTUDENT(sssn) ON DELETE NO ACTION,
  PRIMARY KEY(college,degree,year,gradsssn)
  );

CREATE TABLE COURSE(
  ects VARCHAR(2) NOT NULL,
  courseName VARCHAR(225) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  numHours VARCHAR(2) NOT NULL,
  preReqCourseCode VARCHAR(8) REFERENCES COURSE(courseCode) ON DELETE CASCADE,
  PRIMARY KEY(courseCode)
  );

CREATE TABLE SECTION(
  semester VARCHAR(6) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  yearr CHAR(4) NOT NULL,
  sectionId VARCHAR(11) NOT NULL,
  quota INT(3) UNSIGNED,
  issn CHAR(11) NOT NULL,
  FOREIGN KEY(issn) REFERENCES INSTRUCTOR(ssn) ON DELETE RESTRICT,
  FOREIGN KEY(courseCode) REFERENCES COURSE(courseCode) ON DELETE CASCADE,
  PRIMARY KEY(semester,courseCode,yearr,sectionId)
  );

CREATE TABLE BUILDCLASS(
  buildingName VARCHAR(225) NOT NULL,
  roomNumber VARCHAR(6) NOT NULL,
  capacity VARCHAR(3),
  PRIMARY KEY(buildingName,roomNumber)
  );

CREATE TABLE ENROLLMENT(
  sssn CHAR(11) NOT NULL,
  issn CHAR(11) NOT NULL,
  grade VARCHAR(3),
  semester VARCHAR(6) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  yearr CHAR(4) NOT NULL,
  sectionId VARCHAR(11) NOT NULL,
  buildingName VARCHAR(225),
  roomNo VARCHAR(6),
  hourr VARCHAR(8),
  dayy VARCHAR(8),
  FOREIGN KEY(sssn) REFERENCES STUDENT(sssn) ON DELETE CASCADE,
  FOREIGN KEY(buildingName, roomNo) REFERENCES BUILDCLASS(buildingName, roomNumber) ON DELETE RESTRICT,
  FOREIGN KEY(semester, courseCode, yearr, sectionId) REFERENCES SECTION(semester, courseCode,  yearr, sectionId) ON DELETE NO ACTION,
  FOREIGN KEY(issn) REFERENCES INSTRUCTOR(ssn) ON DELETE RESTRICT,
  PRIMARY KEY(issn, semester, courseCode, yearr, sectionId, sssn)
  );
 
CREATE TABLE TIMESLOT(
  hourr VARCHAR(8) REFERENCES ENROLLMENT(hourr) ON DELETE SET NULL,
  dayy VARCHAR(8) REFERENCES ENROLLMENT(dayy) ON DELETE SET NULL,
  PRIMARY KEY(hourr,dayy)
  );

CREATE TABLE CURRICULA(
  currCode VARCHAR(12) NOT NULL,
  gradOrUGrad VARCHAR(5) NOT NULL,
  dName VARCHAR(225) NOT NULL,
  FOREIGN KEY(dName) REFERENCES DEPARTMENT(dName) ON DELETE NO ACTION,
  PRIMARY KEY(currCode,dName)
  );

CREATE TABLE CIRRUCULACOURSES(
  courseName VARCHAR(225) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  dName VARCHAR(225) NOT NULL,
  currCode VARCHAR(12) NOT NULL,
  FOREIGN KEY(courseCode) REFERENCES COURSE(courseCode) ON DELETE NO ACTION,
  FOREIGN KEY(dName) REFERENCES CURRICULA(dName) ON DELETE RESTRICT,
  FOREIGN KEY(currCode) REFERENCES CURRICULA(currCode) ON DELETE NO ACTION,
  PRIMARY KEY(courseName,dName,currCode)
  );
 
CREATE TABLE EXAMSOFSECTION(
  semester VARCHAR(6) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  yearr CHAR(4) NOT NULL,
  sectionId VARCHAR(11) NOT NULL,
  issn CHAR(11) NOT NULL,
  examName VARCHAR(225) NOT NULL,
  date DATETIME NOT NULL,
  FOREIGN KEY(semester,courseCode,yearr,sectionId) REFERENCES SECTION(semester,courseCode,yearr,sectionId) ON DELETE RESTRICT,
  FOREIGN KEY(issn) REFERENCES SECTION(issn) ON DELETE RESTRICT,
  PRIMARY KEY(semester,courseCode,yearr,sectionId,issn,examName)
  );
 
CREATE TABLE QUESTIONSOFEXAM(
  semester VARCHAR(6) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  yearr CHAR(4) NOT NULL,
  sectionId VARCHAR(11) NOT NULL,
  issn CHAR(11) NOT NULL,
  examName VARCHAR(225) NOT NULL,
  qNo NUMERIC(65) UNSIGNED NOT NULL,
  qPoins SMALLINT(3) UNSIGNED,
  FOREIGN KEY(semester,courseCode,yearr,sectionId,issn,examName) REFERENCES EXAMSOFSECTION(semester,courseCode,yearr,sectionId,issn,examName) ON DELETE RESTRICT,
  PRIMARY KEY(semester,courseCode,yearr,sectionId,issn,qNo)
  );

CREATE TABLE STUDENTGRADESPERQUESTION(
  semester VARCHAR(6) NOT NULL,
  courseCode VARCHAR(8) NOT NULL,
  yearr CHAR(4) NOT NULL,
  sectionId VARCHAR(11) NOT NULL,
  qNo NUMERIC(65) UNSIGNED NOT NULL,
  issn CHAR(11) NOT NULL,
  sssn CHAR(11) NOT NULL,
  pointsEarned SMALLINT(3) UNSIGNED,
  FOREIGN KEY(sssn) REFERENCES ENROLLMENT(sssn) ON DELETE RESTRICT,
  FOREIGN KEY(semester,courseCode,yearr,sectionId,issn,qNo) REFERENCES QUESTIONSOFEXAM(semester,courseCode,yearr,sectionId,issn,qNo) ON DELETE RESTRICT,
  PRIMARY KEY(sssn,semester,courseCode,yearr,sectionId,qNo,issn)
  );
 







